class ComponentLoader{constructor(){this.components={header:"/components/header.html",navigation:"/components/navigation.html",footer:"/components/footer.html"},this.currentPage=this.getCurrentPage(),this.cache=new Map}getCurrentPage(){const e=window.location.pathname.replace(/^\/+|\/+$/g,"");if(e.startsWith("pre-production-services"))return"preproduction";if(e.startsWith("production-services"))return"production";if(e.startsWith("content-production"))return"contentproduction";if(e.startsWith("filming-in-greece"))return"filming";return{"":"home","index.html":"home","about-us":"about",contact:"contact","film-production-services":"services","equipment-rental-Greece":"services","location-scouting-Greece":"services","film-permits-Greece":"services","Greece-film-crew":"services","drone-filming-Greece":"services","corporate-video-Greece":"services","equipment-transport-Greece":"services","translation-services-Greece":"services","casting-services-Greece":"services","post-production-Greece":"services","hire-film-director":"services","hire-film-producer":"services","hire-line-producer":"services","hire-fixer":"services","hire-dop":"services","hire-location-manager":"services","filming-in-Greece":"filming",portfolio:"portfolio",clients:"clients"}[e]||"other"}async loadComponent(e){if(this.cache.has(e))return this.cache.get(e);try{const t=await fetch(this.components[e]);if(!t.ok)throw new Error(`Failed to load ${e}: ${t.status}`);const o=await t.text();return this.cache.set(e,o),o}catch(t){return console.error(`Error loading ${e}:`,t),null}}async loadHeader(){const e=document.getElementById("header-container");if(!e)return;const t=await this.loadComponent("header");t&&(e.innerHTML=t,this.loadMobileMenuCSS(),console.log("✅ Header loaded successfully"))}loadMobileMenuCSS(){if(document.querySelector('link[href="/mobile-menu.css"]'))return;const e=document.createElement("link");e.rel="stylesheet",e.href="/mobile-menu.css",e.type="text/css",document.head.appendChild(e),this.loadDarkThemeCSS(),console.log("✅ Mobile menu CSS loaded dynamically")}loadDarkThemeCSS(){if(document.querySelector('link[href="/dark-theme.css"]'))return;const e=document.createElement("link");e.rel="stylesheet",e.href="/dark-theme.css",e.type="text/css",document.head.appendChild(e),console.log("✅ Dark theme CSS loaded dynamically")}async loadNavigation(){const e=await this.loadComponent("navigation");if(!e)return;const t=(new DOMParser).parseFromString(e,"text/html"),o=t.getElementById("desktop-navigation"),n=t.getElementById("mobile-navigation"),i=document.getElementById("desktop-nav");i&&o&&(i.innerHTML=o.innerHTML);const l=document.getElementById("mobile-navigation-content");l&&n&&(l.innerHTML=n.innerHTML),this.highlightCurrentPage(),this.initializeMobileMenu(),console.log("✅ Navigation loaded successfully")}async loadFooter(){const e=document.getElementById("footer-container");if(!e)return;const t=await this.loadComponent("footer");t&&(e.innerHTML=t,console.log("✅ Footer loaded successfully"))}highlightCurrentPage(){document.querySelectorAll("[data-nav]").forEach(e=>{e.classList.remove("text-greece-blue","font-medium"),e.classList.add("text-greece-gray")});document.querySelectorAll(`[data-nav="${this.currentPage}"]`).forEach(e=>{e.classList.remove("text-greece-gray"),e.classList.add("text-greece-blue","font-medium")})}initializeMobileMenu(){const e=document.getElementById("mobile-menu-button"),t=document.getElementById("mobile-menu-overlay"),o=document.getElementById("mobile-menu"),n=document.getElementById("mobile-menu-close"),i=document.getElementById("mobile-menu-backdrop");document.getElementById("mobile-menu-icon");e&&t&&o&&e.addEventListener("click",()=>{this.openMobileMenu()}),n&&n.addEventListener("click",()=>{this.closeMobileMenu()}),i&&i.addEventListener("click",()=>{this.closeMobileMenu()}),this.initializeMobileMegaMenus(),this.initializeMobileCategoryMenus(),document.addEventListener("keydown",e=>{"Escape"!==e.key||t.classList.contains("hidden")||this.closeMobileMenu()})}openMobileMenu(){const e=document.getElementById("mobile-menu-overlay"),t=document.getElementById("mobile-menu"),o=document.getElementById("mobile-menu-button"),n=document.getElementById("mobile-menu-icon");e&&t&&(e.classList.remove("hidden"),setTimeout(()=>{t.classList.remove("translate-x-full")},10),o&&o.setAttribute("aria-expanded","true"),n&&(n.innerHTML='<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>'),document.body.style.overflow="hidden")}closeMobileMenu(){const e=document.getElementById("mobile-menu-overlay"),t=document.getElementById("mobile-menu"),o=document.getElementById("mobile-menu-button"),n=document.getElementById("mobile-menu-icon");e&&t&&(t.classList.add("translate-x-full"),setTimeout(()=>{e.classList.add("hidden")},300),o&&o.setAttribute("aria-expanded","false"),n&&(n.innerHTML='<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>'),document.body.style.overflow="",this.closeAllMobileSubmenus())}initializeMobileMegaMenus(){document.querySelectorAll(".mobile-mega-toggle").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const o=e.getAttribute("data-target"),n=document.getElementById(o),i=e.querySelector(".mobile-mega-icon"),l="true"===e.getAttribute("aria-expanded");this.closeAllMobileMegaMenus(o),l?(n.classList.add("hidden"),e.setAttribute("aria-expanded","false"),i.style.transform="rotate(0deg)"):(n.classList.remove("hidden"),e.setAttribute("aria-expanded","true"),i.style.transform="rotate(180deg)")})})}initializeMobileCategoryMenus(){document.querySelectorAll(".mobile-category-toggle").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const o=e.getAttribute("data-target"),n=document.getElementById(o),i=e.querySelector(".mobile-category-icon");"true"===e.getAttribute("aria-expanded")?(n.classList.add("hidden"),e.setAttribute("aria-expanded","false"),i.style.transform="rotate(0deg)"):(n.classList.remove("hidden"),e.setAttribute("aria-expanded","true"),i.style.transform="rotate(180deg)")})})}closeAllMobileMegaMenus(e){const t=document.querySelectorAll(".mobile-mega-submenu"),o=document.querySelectorAll(".mobile-mega-toggle"),n=document.querySelectorAll(".mobile-mega-icon");t.forEach(t=>{e&&t.id===e||t.classList.add("hidden")}),o.forEach(t=>{e&&t.getAttribute("data-target")===e||t.setAttribute("aria-expanded","false")}),n.forEach(t=>{const o=t.closest(".mobile-mega-toggle");e&&o.getAttribute("data-target")===e||(t.style.transform="rotate(0deg)")}),this.closeAllMobileCategoryMenus()}closeAllMobileCategoryMenus(){const e=document.querySelectorAll(".mobile-category-submenu"),t=document.querySelectorAll(".mobile-category-toggle"),o=document.querySelectorAll(".mobile-category-icon");e.forEach(e=>{e.classList.add("hidden")}),t.forEach(e=>{e.setAttribute("aria-expanded","false")}),o.forEach(e=>{e.style.transform="rotate(0deg)"})}closeAllMobileSubmenus(){this.closeAllMobileMegaMenus(),this.closeAllMobileCategoryMenus()}async loadAllComponents(){console.log("🚀 Loading dynamic components...");try{await this.loadHeader(),console.log("✅ Header loaded, now loading navigation..."),await this.loadNavigation(),console.log("✅ Navigation loaded, now loading footer..."),await this.loadFooter(),console.log("✅ Footer loaded"),console.log("🎉 All components loaded successfully!"),document.dispatchEvent(new CustomEvent("componentsLoaded"))}catch(e){console.error("❌ Error loading components:",e),setTimeout(()=>{console.log("🔄 Retrying component loading..."),this.loadAllComponents()},1e3)}}}if(document.addEventListener("DOMContentLoaded",()=>{console.log("🔧 DOM Content Loaded - Initializing Component Loader...");(new ComponentLoader).loadAllComponents()}),"loading"===document.readyState)console.log("📄 DOM is still loading, waiting for DOMContentLoaded...");else{console.log("⚡ DOM already loaded, initializing components immediately...");(new ComponentLoader).loadAllComponents()}window.ComponentLoader=ComponentLoader;